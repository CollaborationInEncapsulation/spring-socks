spring.application.name=user
server.port=5006
server.error.include-message=always
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/sock_user
spring.datasource.username=root
spring.datasource.password=
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.initialization-mode=always
spring.zipkin.enabled=false
spring.sleuth.sampler.rate=30
management.endpoints.web.exposure.include=info,health,prometheus
management.health.probes.enabled=true
management.info.git.mode=full
server.compression.enabled=true
server.compression.min-response-size=1KB
spring.resources.cache.cachecontrol.max-age=1d
server.shutdown=graceful
spring.lifecycle.timeout-per-shutdown-phase=10s
# openssl genrsa -out private.pem 2048
# openssl rsa -in private.pem -outform PEM -pubout -out public_key.pem
# openssl pkcs8 -topk8 -inform PEM -in private.pem -out private_key.pem -nocrypt
jwt.private-key=classpath:private_key.pem
jwt.public-key=classpath:public_key.pem
spring.security.oauth2.resourceserver.jwt.public-key-location=classpath:public_key.pem
oauth.clients[0].client-id=cli
oauth.clients[0].client-secret={noop}
oauth.clients[0].authorized-grant-types=password,refresh_token
oauth.clients[0].scope=openid,customer:read,customer:write
oauth.clients[0].access-token-validity-seconds=3600
oauth.clients[0].refresh-token-validity-seconds=43200
oauth.clients[1].client-id=shop-ui
oauth.clients[1].client-secret={noop}shop-ui
oauth.clients[1].additional-information.name=Spring Sockshop
oauth.clients[1].additional-information.url=http://localhost:6060
oauth.clients[1].authorized-grant-types=authorization_code,password,refresh_token,client_credentials
oauth.clients[1].scope=openid,customer:read,customer:write,order:read,order:write
# https://docs.spring.io/spring-security/site/docs/5.3.2.RELEASE/reference/html5/#oauth2login-sample-redirect-uri
oauth.clients[1].registered-redirect-uri=${oauth.clients[1].additional-information.url}/login/oauth2/code/sock
oauth.clients[1].auto-approve-scopes=${oauth.clients[1].scope}
oauth.clients[1].access-token-validity-seconds=86400
oauth.clients[1].refresh-token-validity-seconds=604800